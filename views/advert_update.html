{% extends "layout.html" %}

{% block content %}
<div class="container-fluid">
    <div class="body advert">
        <!-- 面包屑 -->
        <ol class="breadcrumb">
            <li><a href="javascript:;">广告管理</a></li>
            <li class="active">添加广告</li>
        </ol>

        <div class="advert-add">
            <form action="/advert/add" method="post" class="form-horizontal" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">标题</label>
                    <div class="col-md-5">
                        <input type="text" class="form-control input-sm" placeholder="填写广告标题" value="{{ advert.title }}" name="title">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">图片</label>
                    <div class="col-md-5">
                        <img class="avatar_img" style="width: 100px; height: auto" src="{{ advert.image }}">
                        <input type="file" class="form-control input-sm" placeholder="填写广告图片"  name="image">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">链接</label>
                    <div class="col-md-5">
                        <input type="text" class="form-control input-sm" placeholder="填写广告链接" value="{{advert.link}}" name="link">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">开始时间</label>
                    <div class="col-md-5">
                        <input type="text" class="form-control input-sm" placeholder="填写开始时间" value="{{advert.start_time}}" name="start_time">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">结束时间</label>
                    <div class="col-md-5">
                        <input type="text" class="form-control input-sm" placeholder="填写结束时间" value="{{advert.end_time}}" name="end_time">
                    </div>
                </div>
                <!-- <div class="form-group">
                    <label for="" class="col-md-3 control-label">类型</label>
                    <div class="col-md-2">
                        <select name="" class="form-control input-sm">
                            <option value="">顶级分类</option>
                            <option value="">前端开发</option>
                            <option value="">后端开发</option>
                            <option value="">数据库</option>
                            <option value="">云计算&大数据</option>
                            <option value="">视觉设计</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">广告链接</label>
                    <div class="col-md-5">
                        <input type="text" class="form-control input-sm" placeholder="填写广告链接">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">排序</label>
                    <div class="col-md-1">
                        <input type="text" class="form-control input-sm" value="10">
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="col-md-3 control-label">是否开启</label>
                    <div class="col-md-5">
                        <label class="checkbox-inline">
                            <input type="checkbox" checked> 是
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox"> 否
                        </label>
                    </div>
                </div> -->
                <div class="form-group">
                    <div class="col-md-8">
                        <input type="submit" value="保存" class="btn btn-success btn-sm pull-right">
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    $('.form-horizontal').on('submit', function (e) {
        e.preventDefault()
        // var formData = $(this).serialize()
        // console.log(formData)
        var formData = new FormData($(this)[0])
        $.ajax({
            url: '/test',
            type: 'post',
            data: formData,
            processData:false,
            contentType:false,
            success: function (res) {
                if(res){
                    alert("上传成功！");
                }
                console.log(res);

                $(".avatar_img").attr("src",res);
            },

        })
    })

</script>
{% endblock %}

